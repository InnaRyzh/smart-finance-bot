/**
 * Smart Emojis - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥–±–æ—Ä —ç–º–æ–¥–∑–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
 * –ú–æ–∑–≥ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤ 60,000 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ —Ç–µ–∫—Å—Ç–∞
 */

const categoryEmojiMap: Record<string, string> = {
  // –ï–¥–∞ –∏ –Ω–∞–ø–∏—Ç–∫–∏
  '–µ–¥–∞': 'üçî',
  '–ø—Ä–æ–¥—É–∫—Ç—ã': 'üõí',
  '—Ä–µ—Å—Ç–æ—Ä–∞–Ω': 'üçΩÔ∏è',
  '–∫–∞—Ñ–µ': '‚òï',
  '–¥–æ—Å—Ç–∞–≤–∫–∞': 'üçï',
  '—Ñ–∞—Å—Ç—Ñ—É–¥': 'üçü',
  '–∞–ª–∫–æ–≥–æ–ª—å': 'üç∑',
  '–∫–æ—Ñ–µ': '‚òï',
  
  // –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
  '—Ç–∞–∫—Å–∏': 'üöï',
  'uber': 'üöï',
  'uklon': 'üöï',
  'bolt': 'üöï',
  '—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç': 'üöó',
  '–±–µ–Ω–∑–∏–Ω': '‚õΩ',
  '–ø–∞—Ä–∫–æ–≤–∫–∞': 'üÖøÔ∏è',
  '–º–µ—Ç—Ä–æ': 'üöá',
  '–∞–≤—Ç–æ–±—É—Å': 'üöå',
  '—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ': 'üöó',
  
  // –ó–¥–æ—Ä–æ–≤—å–µ
  '–∑–¥–æ—Ä–æ–≤—å–µ': 'üíä',
  '–º–µ–¥–∏—Ü–∏–Ω–∞': 'üè•',
  '–≤—Ä–∞—á': 'üë®‚Äç‚öïÔ∏è',
  '–ª–µ–∫–∞—Ä—Å—Ç–≤–∞': 'üíä',
  '–∞–ø—Ç–µ–∫–∞': 'üíä',
  '—Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥': 'ü¶∑',
  
  // –ö–≤–∞—Ä—Ç–∏—Ä–∞ –∏ –¥–æ–º
  '–∫–≤–∞—Ä—Ç–∏—Ä–∞': 'üè†',
  '–∫–æ–º–º—É–Ω–∞–ª–∫–∞': 'üí°',
  '–∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ': 'üí°',
  '–∞—Ä–µ–Ω–¥–∞': 'üè†',
  '—Ä–µ–º–æ–Ω—Ç': 'üî®',
  '–º–µ–±–µ–ª—å': 'üõãÔ∏è',
  '–±—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞': 'üì∫',
  
  // –°–µ–º—å—è –∏ –¥—Ä—É–∑—å—è
  '—Å–µ–º—å—è': 'üë®‚Äçüë©‚Äçüëß',
  '–ø–µ—Ä–µ–≤–æ–¥—ã': 'üí∏',
  '–ø–æ–º–æ—â—å': 'ü§ù',
  '–ø–æ–¥–∞—Ä–æ–∫': 'üéÅ',
  '–¥–µ—Ç–∏': 'üë∂',
  
  // –†–∞–±–æ—Ç–∞ –∏ –¥–æ—Ö–æ–¥—ã
  '—Ä–∞–±–æ—Ç–∞': 'üíº',
  '–∑–∞—Ä–ø–ª–∞—Ç–∞': 'üí∞',
  '–¥–æ—Ö–æ–¥': 'üí∞',
  '–±–∏–∑–Ω–µ—Å': 'üíº',
  '—Ñ—Ä–∏–ª–∞–Ω—Å': 'üíª',
  
  // –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
  '—Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è': 'üé¨',
  '–∫–∏–Ω–æ': 'üé¨',
  '–∫–æ–Ω—Ü–µ—Ä—Ç': 'üéµ',
  '–∏–≥—Ä—ã': 'üéÆ',
  '—Ö–æ–±–±–∏': 'üé®',
  
  // –û–¥–µ–∂–¥–∞ –∏ –ø–æ–∫—É–ø–∫–∏
  '–æ–¥–µ–∂–¥–∞': 'üëï',
  '–ø–æ–∫—É–ø–∫–∏': 'üõçÔ∏è',
  '–æ–±—É–≤—å': 'üë†',
  '–∞–∫—Å–µ—Å—Å—É–∞—Ä—ã': 'üíç',
  
  // –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
  '–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ': 'üìö',
  '–∫—É—Ä—Å—ã': 'üìñ',
  '–∫–Ω–∏–≥–∏': 'üìö',
  
  // –°–ø–æ—Ä—Ç
  '—Å–ø–æ—Ä—Ç': '‚öΩ',
  '—Ñ–∏—Ç–Ω–µ—Å': 'üí™',
  '—Ç—Ä–µ–Ω–∞–∂–µ—Ä–Ω—ã–π –∑–∞–ª': 'üèãÔ∏è',
  
  // –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è
  '–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è': '‚úàÔ∏è',
  '–æ—Ç–µ–ª—å': 'üè®',
  '–±–∏–ª–µ—Ç—ã': 'üé´',
  
  // –ü—Ä–æ—á–µ–µ
  '–ø—Ä–æ—á–µ–µ': 'üì¶',
  '–¥—Ä—É–≥–æ–µ': 'üì¶',
  '–ø—Ä–æ—á–∏–µ': 'üì¶',
};

/**
 * –ü–æ–ª—É—á–∏—Ç—å —ç–º–æ–¥–∑–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —É–º–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
 */
export const getCategoryEmoji = (category: string): string => {
  if (!category) return 'üí∞';
  
  const normalized = category.toLowerCase().trim();
  
  // –ü—Ä—è–º–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
  if (categoryEmojiMap[normalized]) {
    return categoryEmojiMap[normalized];
  }
  
  // –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é
  for (const [key, emoji] of Object.entries(categoryEmojiMap)) {
    if (normalized.includes(key) || key.includes(normalized)) {
      return emoji;
    }
  }
  
  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–µ—Ä–≤–æ–º—É —Å–ª–æ–≤—É
  const firstWord = normalized.split(' ')[0];
  if (categoryEmojiMap[firstWord]) {
    return categoryEmojiMap[firstWord];
  }
  
  // –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ —ç–º–æ–¥–∑–∏ –ø–æ —Ç–∏–ø—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  if (normalized.includes('–¥–æ—Ö–æ–¥') || normalized.includes('–∑–∞—Ä–ø–ª–∞—Ç–∞') || normalized.includes('—Ä–∞–±–æ—Ç–∞')) {
    return 'üí∞';
  }
  
  if (normalized.includes('—Ä–∞—Å—Ö–æ–¥') || normalized.includes('–ø–æ–∫—É–ø–∫–∞')) {
    return 'üí∏';
  }
  
  // –î–µ—Ñ–æ–ª—Ç
  return 'üí∞';
};

/**
 * –ü–æ–ª—É—á–∏—Ç—å —Ü–≤–µ—Ç –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–¥–ª—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤)
 */
export const getCategoryColor = (category: string, type: 'income' | 'expense'): string => {
  const normalized = category.toLowerCase();
  
  if (type === 'income') {
    return 'bg-emerald-500/10 text-emerald-500';
  }
  
  // –¶–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞—Å—Ö–æ–¥–æ–≤
  if (normalized.includes('–µ–¥–∞') || normalized.includes('–ø—Ä–æ–¥—É–∫—Ç—ã') || normalized.includes('—Ä–µ—Å—Ç–æ—Ä–∞–Ω')) {
    return 'bg-orange-500/10 text-orange-500';
  }
  
  if (normalized.includes('—Ç–∞–∫—Å–∏') || normalized.includes('—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç')) {
    return 'bg-blue-500/10 text-blue-500';
  }
  
  if (normalized.includes('–∑–¥–æ—Ä–æ–≤—å–µ') || normalized.includes('–º–µ–¥–∏—Ü–∏–Ω–∞')) {
    return 'bg-red-500/10 text-red-500';
  }
  
  if (normalized.includes('–∫–≤–∞—Ä—Ç–∏—Ä–∞') || normalized.includes('–∫–æ–º–º—É–Ω–∞–ª–∫–∞')) {
    return 'bg-purple-500/10 text-purple-500';
  }
  
  return 'bg-rose-500/10 text-rose-500';
};

